---
import { Image } from "astro:assets";
import hero1 from "../assets/heroSlide/hero1.webp";
import hero2 from "../assets/heroSlide/hero2.webp";
import hero3 from "../assets/heroSlide/hero3.webp";
import hero4 from "../assets/heroSlide/hero4.webp";
import hero5 from "../assets/heroSlide/hero5.webp";
import hero6 from "../assets/heroSlide/hero6.webp";

const images = [hero4, hero1, hero5, hero2, hero6, hero3];
---

<section
  class="relative h-screen w-full overflow-hidden flex items-center justify-center text-center text-white"
  id="hero"
>
  <!-- Background Slider -->
  <div class="absolute inset-0 z-0">
    {
      images.map((img, index) => (
        <Image
          src={img}
          alt={`Vista del hotel ${index + 1}`}
          class={`absolute inset-0 w-full h-full object-cover object-bottom transition-opacity duration-1000 ease-in-out ${index === 0 ? "opacity-100" : "opacity-0"}`}
          data-hero-slide
          loading={index === 0 ? "eager" : "lazy"}
          widths={[640, 768, 1024, 1280, 1920]}
          sizes="100vw"
        />
      ))
    }

    <!-- Overlay -->
    <div
      class="absolute inset-0 bg-linear-to-b from-black/70 via-black/50 to-black/70 z-10"
    >
    </div>
  </div>

  <!-- Content -->
  <div class="relative z-20 container mx-auto px-4 flex flex-col items-center">
    <!-- Logo -->
    <div class="mb-8 opacity-0 translate-y-10" id="hero-logo">
      <Image
        src={import("../assets/logo.webp")}
        alt="Logo Centro de Descanso Los Poetas"
        class="w-48 md:w-64 h-auto drop-shadow-2xl"
        loading="eager"
        widths={[192, 256]}
        sizes="(max-width: 768px) 192px, 256px"
      />
    </div>

    <!-- Main Text -->
    <h1
      class="text-4xl md:text-6xl lg:text-7xl font-light mb-6 tracking-wide drop-shadow-2xl opacity-0 translate-y-10"
      id="hero-title"
    >
      <span
        class="block text-2xl md:text-3xl mb-2 font-light italic text-sky-200 drop-shadow-md"
        >Sal de la rutina</span
      >
      Descanso para el <br class="md:hidden" />
      <span class="font-bold">Cuerpo y Alma</span>
    </h1>

    <p
      class="text-lg md:text-xl max-w-2xl mx-auto mb-10 text-slate-100 opacity-0 translate-y-10 drop-shadow-lg"
      id="hero-subtitle"
    >
      Un refugio boutique en El Quisco. Cabañas de alto estándar a pasos del
      mar, diseñadas para tu paz y seguridad.
    </p>

    <!-- CTAs -->
    <div
      class="flex flex-col md:flex-row gap-4 opacity-0 translate-y-10"
      id="hero-cta"
    >
      <a
        href="https://wa.me/56952299793"
        target="_blank"
        class="bg-emerald-700 hover:bg-emerald-600 text-white font-medium py-3 px-8 rounded-full transition-all duration-300 shadow-lg hover:shadow-emerald-500/30 flex items-center justify-center gap-2"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-5 w-5"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
          ></path>
        </svg>
        Reservar por WhatsApp
      </a>
      <a
        href="#experience"
        class="bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/30 text-white font-medium py-3 px-8 rounded-full transition-all duration-300"
      >
        Descubre la Experiencia
      </a>
    </div>
  </div>

  <!-- Scroll Down Indicator -->
  <div
    class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce opacity-70 z-20"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="h-6 w-6 text-white"
      fill="none"
      viewBox="0 0 24 24"
      stroke="currentColor"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
    </svg>
  </div>
</section>

<script>
  import { gsap } from "gsap";

  // Existing GSAP Animations
  const tl = gsap.timeline({ defaults: { ease: "power3.out" } });

  tl.to("#hero-logo", { opacity: 1, y: 0, duration: 1.2, delay: 0.2 })
    .to("#hero-title", { opacity: 1, y: 0, duration: 1, stagger: 0.2 }, "-=0.8")
    .to("#hero-subtitle", { opacity: 1, y: 0, duration: 1 }, "-=0.8")
    .to("#hero-cta", { opacity: 1, y: 0, duration: 0.8 }, "-=0.6");

  // Slider Logic
  const slides = document.querySelectorAll("[data-hero-slide]");
  let currentSlide = 0;
  const slideInterval = 5000; // 5 seconds

  if (slides.length > 0) {
    setInterval(() => {
      // Fade out current
      slides[currentSlide].classList.remove("opacity-100");
      slides[currentSlide].classList.add("opacity-0");

      // Calculate next
      currentSlide = (currentSlide + 1) % slides.length;

      // Fade in next
      slides[currentSlide].classList.remove("opacity-0");
      slides[currentSlide].classList.add("opacity-100");
    }, slideInterval);
  }
</script>
